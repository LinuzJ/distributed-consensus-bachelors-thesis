\section{Consensus Problem}
%% TEXT %%
\subsection{Background}
\linus{TODO: Explain background to consensus problem and its relation to population protocols}

The consensus problem is fundamental challenge in the field of distributed computing. The problem has been studied extensively in literature and there are multiple popular algorithms 


\subsection{3-state approximate majority protocol}

\subsubsection{Introduction}

A classic population protocol for approximate majority consensus was presented for a simple 3-state system by Angluin in \cite{angluinSimplePopulationProtocol2008}. The protocol presented is shown to converge to a consensus in \inlineMath{O(n \log n)} interactions with high probability. It is also shown that the output value is correct, meaning it matches the initial majority, with high probability if the initial net majority is \inlineMath{w(\sqrt{n} \log n)}.

The protocol is a simple 3-state protocol, meaning \inlineMath{Q = \{x, y, b\}}. The purpose of the protocol is to make all agents decide on the initial majority state, either \inlineMath{x} and \inlineMath{y}. The extra state \inlineMath{b} is a an "blank state". The idea of the protocol is that when two agents with different states meet in an interaction, the \emph{responder} abandons its state and enters the blank state \inlineMath{b}. If an agent with the blank state \inlineMath{b} interacts with another agent, it adopts the other agents state, assuming the other agent does not also have the blank state \inlineMath{b}. Because the collisions between agents are chosen by an adversary, the interactions between agents with the opposite state are equally balanced. However, because an agent with the blank state is more likely to interact with an agent with the initial majority state, the initial majority will increase until all agents have the same state. Once all agents have converged to the same state, the protocol is finished and the system has reached consensus. 

Furthermore, Angluin shows that with high probability that the inclusion of \inlineMath{o(\sqrt{n})} Byzantine agents cannot notably delay the protocol converging to a state where the majority of non-Byzantine agents have the correct state. Byzantine agents are agents capable of appearing as any state, regardless of their previous interaction and initial state. The inclusion of these Byzantine agents can, however, keep a small part of of the non-Byzantine agents confused. Additionally, after exponential time on average, the Byzantine agents can eventually push the system to a stable incorrect state, where all of the non-Byzantine agents are blank. In the case that \inlineMath{z} Byzantine agents are included amongst the population \inlineMath{n} of normal agents, any execution select a pair at random from the combined population of \inlineMath{n} and \inlineMath{z}.

\subsubsection{Behaviour}

The behaviour and bounds of the protocol will now be discussed further. Like previously mentioned, the agents in the system can have the states in \inlineMath{Q = \{x, y, b\}}, where \inlineMath{b} is the \emph{blank} state. We can map out all possible interactions between agents of different states in \inlineMath{Q} in the following table

\begin{figure}[H]
    \centering
    \begin{tabular}{|c | c | c | c|} 
     \hline
      & \inlineMath{x} & \inlineMath{b} & \inlineMath{y} \\ [0.5ex] 
     \hline
     \inlineMath{x} & \inlineMath{(x, x)} & \inlineMath{(x, x)} & \inlineMath{(x, b)} \\ 
     \hline
     \inlineMath{b} & \inlineMath{(b, x)} & \inlineMath{(b, b)} & \inlineMath{(b, y)} \\
     \hline
     \inlineMath{y} & \inlineMath{(y, b)} & \inlineMath{(y, y)} & \inlineMath{(y, y)} \\
     \hline
    \end{tabular}
    \caption{Potential interactions for \inlineMath{Q}}
    \label{fig:QInteractions}
\end{figure}

All interactions modify the \emph{responders} state. This makes the protocol \emph{one-way}. Notable is also that not all interactions changes the states. For example \inlineMath{xx} does not change any state. The interactions that do change states are \inlineMath{xy, yx, yb, xb}.The system can be in three stable configurations \inlineMath{C}: all \inlineMath{b}'s, all \inlineMath{x}'s or all \inlineMath{y}'s. The first one of the previously named configurations cannot be reached from any configuration containing anything else than \inlineMath{b}'s. The two latter configurations are also stable and from every configuration made up of not only \inlineMath{b}'s, one of them can be reached.

\subsection{Generalization}
\linus{Go through the results of the recent study \cite{AspnesFastConverganceOfKOpinion2023} that generalizes the results of \cite{angluinSimplePopulationProtocol2008} }

%% END TEXT %%
\clearpage